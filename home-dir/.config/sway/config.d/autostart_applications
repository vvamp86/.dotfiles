include ~/.config/sway/config.d/default

# Apply xed settings with self-destructing script
#exec ~/.config/sway/scripts/xed_setup.sh

# Auth with polkit-gnome:
exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Start gnome-keyring daemon:
#exec_always --no-startup-id /usr/bin/gnome-keyring-daemon --start --components=secrets

# Import environment variables for user systemd service manager
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK

# Update dbus environments with display variables
exec hash dbus-update-activation-environment 2>/dev/null && \
     dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK \
     XDG_CURRENT_DESKTOP=sway XDG_SESSION_TYPE=wayland

# Idle configuration
exec swayidle idlehint 1

# Desktop notifications
exec mako

# Autotiling
exec autotiling

# cliphist
exec wl-paste --type text --watch cliphist store
exec wl-paste --type image --watch cliphist store

# Network Applet
exec nm-applet --indicator

# Firewall Applet
exec sleep 2 && firewall-applet

# Welcome App
exec eos-welcome --startdelay=3

# Sway Fader
# exec python3 ~/.config/sway/scripts/swayfader.py

######## Old
exec_always --no-startup-id autotiling

# Background
exec_always --no-startup-id sleep 1 && swaybg -i /usr/share/backgrounds/wallpaper.png -m fill

# reads and executes .desktop files
exec --no-startup-id dex --autostart --environment sway

# tmux background saver
exec_always ~/.config/sway/scripts/tmux-session-saver.sh &

# Privilege for GUIs
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Display configuration manager
exec_always kanshi

#############################################
# autostart applications/services on login: #
#############################################
exec --no-startup-id sh -c "sleep 1 && swaymsg 'workspace $ws1; exec vesktop'"
exec --no-startup-id sh -c "sleep 1 && env LD_PRELOAD=/usr/lib/spotify-adblock.so spotify --enable-features=UseOzonePlatform"
exec --no-startup-id sh -c "sleep 2 && swaymsg 'workspace $ws2; exec obsidian'"
exec --no-startup-id sh -c "sleep 2 && swaymsg 'workspace $ws2; exec brave'"

